<html>
<head>
<meta charset="UTF-8">
<title>凯尔希生成器</title>
<style>
    div { margin:0.5cm 10% 0.5cm 10%; } 
    .textCenter { text-align:center; } 
</style>
</head>

<body>
    <div class="textCenter">凯尔希生成器</div>
    <div class="textCenter">主题：<input id="in", value="经验加三"></input></div>
    <div class="textCenter"><button onclick="generate()">生成</button></div>
    <div id="Kalsit"></div>
    
<script type="text/javascript">

    let begin = [
        "博士，你在质疑我对{topic}的理解吗？要知道早在{year}年前我就开始了对{topic}的研究，而你在这方面毫无建树。"
    ];
    
    let middle = [
        "我不确定你是否真的想了解{topic}，或是将它遗忘在了某个角落，或者，我十分怀疑你并没有失去对它的掌控，你只是假装遗忘了{topic}，而你借此与我交谈。",
        "不论你认为{topic}的现况如何，它又能对{randA}的{randB}产生什么影响呢？你真的认为{topic}可以改变这一切吗？相反，它什么也做不到，而我们还有些许微小的力量，去改变{randA}的{randB}。"
    ];
    
    let listA = ["泰拉大陆","罗德岛","你","阿米娅","我们"];
    
    let listB = ["过去","未来","成长","道路","明天","归宿","命运"];
    
    
    function random_number(min, max) { return Math.floor(min + (max - min) * Math.random()); }
    function take_random(list) { return list[random_number(0, list.length)]; }
    function get_from_templates(temp, topic) {
        return take_random(temp)
            .replace(/{topic}/g, topic)
            .replace(/{year}/g, random_number(3, 100).toString())
            .replace(/{randA}/g, () => take_random(listA))
            .replace(/{randB}/g, () => take_random(listB));
    }
    
    function generate() {
        let topic = document.getElementById('in').value;
        let text = [];
        let begin_num = random_number(1, 2);
        let middle_num = random_number(2, 3);
        for (let i = 0; i < begin_num; i += 1) {
            text.push(get_from_templates(begin, topic));
        }
        for (let i = 0; i < middle_num; i += 1) {
            text.push(get_from_templates(middle, topic));
        }
        document.getElementById("Kalsit").innerHTML = text.join("");
    }
</script>
</body>
</html>